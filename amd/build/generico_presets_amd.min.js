define(["jquery","core/log"],function(a,b){"use strict";return b.debug("Filter Generico Presets initialising"),{presetdata:!1,populateform:function(b,c,d){var e={};if(e.key=document.getElementById("id_s_filter_generico_templatekey_"+b),e.requirecss=document.getElementById("id_s_filter_generico_templaterequire_css_"+b),e.requirejs=document.getElementById("id_s_filter_generico_templaterequire_js_"+b),e.defaults=document.getElementById("id_s_filter_generico_templatedefaults_"+b),e.jquery=document.getElementById("id_s_filter_generico_templaterequire_jquery_"+b),e.amd=document.getElementById("id_s_filter_generico_template_amd_"+b),e.body=document.getElementById("id_s_filter_generico_template_"+b),e.bodyend=document.getElementById("id_s_filter_generico_templateend_"+b),e.script=document.getElementById("id_s_filter_generico_templatescript_"+b),e.style=document.getElementById("id_s_filter_generico_templatestyle_"+b),e.presetdata=document.getElementById("id_s_filter_generico_presetdata_"+b),c||d){0==c&&d||(d=this.presetdata);var f=["key","requirecss","requirejs","defaults","jquery","amd","body","bodyend","script","style"];a.each(f,function(a,b){e[b].value=d[c][b]}),e.jquery.checked=this.presetdata[c].jquery?!0:!1,e.amd.checked=this.presetdata[c].amd?!0:!1}},dopopulate:function(a,b){this.populateform(a,0,new Array(b))},init:function(b){if(!this.presetdata){var c="#id_s_filter_generico_presetdata_"+b.templateindex,d=a(c).get(0);this.presetdata=JSON.parse(d.value),a(c).remove()}var e=this;a("select[name='filter_generico/presets']").change(function(){e.populateform(b.templateindex,a(this).val())}),a("select[name='filter_generico/presets']").on("dragover",function(b){b.preventDefault(),b.stopPropagation(),a(this).addClass("dragging")}),a("select[name='filter_generico/presets']").on("dragleave",function(b){b.preventDefault(),b.stopPropagation(),a(this).removeClass("dragging")}),a("select[name='filter_generico/presets']").on("drop",function(a){a.preventDefault();var c=a.originalEvent.dataTransfer.files;if(c.length){var d=c[0];if(d){var f=new FileReader;f.onload=function(a){var c=a.target.result,d=JSON.parse(c);e.dopopulate(b.templateindex,d)},f.readAsText(d)}else alert("Failed to load file")}})}}});